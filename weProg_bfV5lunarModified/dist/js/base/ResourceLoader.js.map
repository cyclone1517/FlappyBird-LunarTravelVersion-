{"version":3,"sources":["../../../js/base/ResourceLoader.js"],"names":["ResourceLoader","map","Map","key","value","image","wx","createImage","src","set","callback","loadedcount","values","onload","size"],"mappings":";;;;;;;;;;;AAAA;;;;IAEaA,c,WAAAA,c;AACT,8BAAc;AAAA;;AACV,aAAKC,GAAL,GAAW,IAAIC,GAAJ,sBAAX;AADU;AAAA;AAAA;;AAAA;AAEV,iCAAuB,KAAKD,GAA5B,8HAAgC;AAAA;;AAAA;;AAAA,oBAAvBE,GAAuB;AAAA,oBAAnBC,KAAmB;;AAC5B;AACA,oBAAMC,QAAQC,GAAGC,WAAH,EAAd;AACAF,sBAAMG,GAAN,GAAYJ,KAAZ;AACA,qBAAKH,GAAL,CAASQ,GAAT,CAAaN,GAAb,EAAiBE,KAAjB;AACH;AAPS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQb;;;;iCAEQK,Q,EAAU;AAAA;;AACf,gBAAIC,cAAc,CAAlB;AADe;AAAA;AAAA;;AAAA;AAEf,sCAAiB,KAAKV,GAAL,CAASW,MAAT,EAAjB,mIAAoC;AAAA,wBAA5BR,KAA4B;;AAChCA,0BAAMS,MAAN,GAAe,YAAM;AACjBF;AACA,4BAAGA,eAAe,MAAKV,GAAL,CAASa,IAA3B,EAAgC;AAC5BJ,qCAAS,MAAKT,GAAd;AACH;AACJ,qBALD;AAMH;AATc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUlB;;;iCAEe;AACZ,mBAAO,IAAID,cAAJ,EAAP;AACH","file":"ResourceLoader.js","sourcesContent":["import {Resources} from \"./Resources.js\";\r\n\r\nexport class ResourceLoader{\r\n    constructor() {\r\n        this.map = new Map(Resources);\r\n        for(let [key,value] of this.map){\r\n            //const image = new Image();\r\n            const image = wx.createImage();\r\n            image.src = value;\r\n            this.map.set(key,image);\r\n        }\r\n    }\r\n\r\n    onloaded(callback) {\r\n        let loadedcount = 0;\r\n        for(let value of this.map.values()) {\r\n            value.onload = () => {\r\n                loadedcount++;\r\n                if(loadedcount >= this.map.size){\r\n                    callback(this.map);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static create() {\r\n        return new ResourceLoader();\r\n    }\r\n}"]}