{"version":3,"sources":["../Main.js"],"names":["Main","canvas","wx","createCanvas","ctx","getContext","DataStore","getInstance","director","getIInstance","loader","create","onloaded","onResourceFirstLoaded","map","res","registerEvent","init","isGameOver","put","createPencil","run","onTouchStart","console","log","birdsEvent"],"mappings":";;;;;;;qjBAAA;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;IAGaA,I,WAAAA,I;AACT,oBAAa;AAAA;;AAAA;;AACT;AACA,aAAKC,MAAL,GAAcC,GAAGC,YAAH,EAAd;AACA,aAAKC,GAAL,GAAW,KAAKH,MAAL,CAAYI,UAAZ,CAAuB,IAAvB,CAAX;AACA,aAAKC,SAAL,GAAiB,qBAAUC,WAAV,EAAjB;AACA,aAAKC,QAAL,GAAgB,mBAASC,YAAT,EAAhB;AACA,YAAMC,SAAS,+BAAeC,MAAf,EAAf;AACAD,eAAOE,QAAP,CAAgB;AAAA,mBAAK,MAAKC,qBAAL,CAA2BC,GAA3B,CAAL;AAAA,SAAhB;AACH;;;;8CAEqBA,G,EAAI;AACtB,iBAAKR,SAAL,CAAeL,MAAf,GAAwB,KAAKA,MAA7B;AACA,iBAAKK,SAAL,CAAeF,GAAf,GAAqB,KAAKA,GAA1B;AACA,iBAAKE,SAAL,CAAeS,GAAf,GAAqBD,GAArB;AACA,iBAAKE,aAAL;AACA,iBAAKC,IAAL;AACH;;;+BAEK;AACF,iBAAKT,QAAL,CAAcU,UAAd,GAA2B,KAA3B;;AAEA,iBAAKZ,SAAL,CACKa,GADL,CACS,SADT,EACoB,EADpB,EAEKA,GAFL,CAES,YAFT,0BAGKA,GAHL,CAGS,MAHT,cAIKA,GAJL,CAIS,OAJT,gBAKKA,GALL,CAKS,OALT,gBAMKA,GANL,CAMS,aANT;AAOA;AACA;AACA,iBAAKX,QAAL,CAAcY,YAAd;AACA,iBAAKZ,QAAL,CAAca,GAAd;AACH;;;wCAEe;AAAA;;AACZnB,eAAGoB,YAAH,CAAgB,YAAI;AAChB,oBAAI,OAAKd,QAAL,CAAcU,UAAlB,EAA8B;AAC1BK,4BAAQC,GAAR,CAAY,MAAZ;AACA,2BAAKP,IAAL;AACH,iBAHD,MAGO;AACHM,4BAAQC,GAAR,CAAY,SAAZ;AACA,2BAAKhB,QAAL,CAAciB,UAAd;AACH;AACJ,aARD;AASH","file":"Main.js","sourcesContent":["//初始化游戏精灵，作为游戏开始的入口\r\nimport {ResourceLoader} from \"./js/base/ResourceLoader.js\";\r\nimport {BackGround} from \"./js/runtime/BackGround.js\";\r\nimport {DataStore} from \"./js/base/DataStore.js\";\r\nimport {Director} from \"./js/Director.js\";\r\nimport {Land} from \"./js/runtime/Land.js\";\r\nimport {Birds} from \"./js/player/Birds.js\";\r\nimport {StartButton} from \"./js/player/StartButton.js\";\r\nimport {Score} from \"./js/player/Score.js\";\r\n\r\n\r\nexport class Main{\r\n    constructor(){\r\n        //this.canvas = document.getElementById('game_canvas');\r\n        this.canvas = wx.createCanvas();\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this.DataStore = DataStore.getInstance();\r\n        this.director = Director.getIInstance();\r\n        const loader = ResourceLoader.create();\r\n        loader.onloaded(map=>this.onResourceFirstLoaded(map));\r\n    }\r\n\r\n    onResourceFirstLoaded(map){\r\n        this.DataStore.canvas = this.canvas;\r\n        this.DataStore.ctx = this.ctx;\r\n        this.DataStore.res = map;\r\n        this.registerEvent();\r\n        this.init()\r\n    }\r\n\r\n    init(){\r\n        this.director.isGameOver = false;\r\n\r\n        this.DataStore\r\n            .put('pencils', [])\r\n            .put('background', BackGround)\r\n            .put('land', Land)\r\n            .put('birds', Birds)\r\n            .put('score',Score)\r\n            .put('startButton', StartButton);\r\n        //创建铅笔在游戏逻辑之前\r\n        // this.tcEvent = this.registerEvent();\r\n        this.director.createPencil();\r\n        this.director.run();\r\n    }\r\n\r\n    registerEvent() {\r\n        wx.onTouchStart(()=>{\r\n            if (this.director.isGameOver) {\r\n                console.log('游戏开始');\r\n                this.init();\r\n            } else {\r\n                console.log('clicked');\r\n                this.director.birdsEvent();\r\n            }\r\n        })\r\n    }\r\n}"]}